!function(){let t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,n){"GET"===e&&n.includes("netmagcdn.com:2228")&&!n.startsWith("https://hd.zorox.live/")&&(arguments[1]=`https://hd.zorox.live/${n}`),t.apply(this,arguments)}}(),function(){let t=document.referrer;if(!t.includes("animesuge")&&!t.includes("anikoto")){console.log("..");return}let e=new URLSearchParams(window.location.search),n=e.get("ep_id");if(n&&""!==n.trim()){let o=!1,s=!1,i=null,r=null,p=XMLHttpRequest.prototype.open,l=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(t,e){this._url=e,p.apply(this,arguments)},XMLHttpRequest.prototype.send=function(t){this.addEventListener("load",function(){if(200===this.status){if(this._url&&this._url.includes("getSources?id=")&&!o)try{i=JSON.parse(this.responseText),o=!0}catch(t){console.error("Failed to parse getSources response:",t)}if(this._url&&this._url.includes("/master.m3u8")&&!s&&(r=this._url,s=!0),o&&s&&i&&r){i.sources=r;let e=new XMLHttpRequest;e.open("POST","https://kotostream.online/save_data.php",!0),e.setRequestHeader("Content-Type","application/json");let p=JSON.stringify({ep_id:n,data:i});e.send(p),i=null,r=null}}}),l.apply(this,arguments)}}}();
